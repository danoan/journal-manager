{% extends "base.html" %}

{% block scripts %}
    {{ super() }}
    <script>
            function get_first_component(href){
                if (href.split("//").length>1) {
                    href = href.split("//")[1];
                }

                if (href.split("/").length>1) {
                    href = href.split("/")[1];
                }

                let bar_split = href.split("/");
                if (bar_split.length===0) {
                  return "";
                } else {
                  return bar_split[0];
                }
            }

            function journal_manager_home_url(){
                return '/';
            }
            
            function home_click(){
                document.location.href=journal_manager_home_url();
            }
            
            function quick_note_url(){
                return `/${get_first_component(document.location.href)}/quick-note/add`;
            }

            function add_quick_note(){
                document.location.href=quick_note_url();
            }

            function add_navigation_bar_button(button){
                var nav_bar = document.getElementsByClassName("md-header__inner")[0];
                var el_before_icons = nav_bar.children[2];
                nav_bar.insertBefore(button, el_before_icons);
            }

            function add_quick_note_button(){
                var quick_note_button = document.createElement("div");
                quick_note_button.classList.add("md-header__button");
                quick_note_button.classList.add("md-icon");
                quick_note_button.onclick = add_quick_note; 
                quick_note_button.innerHTML = `
     <svg version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" y="0px" xml:space="preserve" width="45px" height="45px" x="50px" viewBox="0 0 37 37">
<g transform="translate(-85.59599,-112.95546)">
<path d="M 103.9065,112.95546 A 18.31074,18.31074 0 0 0 85.59599,131.26597 18.31074,18.31074 0 0 0 103.9065,149.577 18.31074,18.31074 0 0 0 122.21753,131.26597 18.31074,18.31074 0 0 0 103.9065,112.95546 Z m -1.9606,7.73338 h 3.9212 v 8.63307 h 8.6 v 3.88813 h -8.6 v 8.63307 h -3.9212 v -8.63307 h -8.599996 v -3.88813 h 8.599996 z"></path></g></svg>
                `
                add_navigation_bar_button(quick_note_button);
            }

            function add_journals_home_button(){
                var journals_home_button = document.createElement("div");
                journals_home_button.classList.add("md-header__button");
                journals_home_button.classList.add("md-icon");
                journals_home_button.for = "__home";
                journals_home_button.onclick = home_click;
                journals_home_button.innerHTML = `
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="460.298px" height="460.297px" viewBox="0 0 460.298 460.297" style="enable-background:new 0 0 460.298 460.297;"
	 xml:space="preserve">
             <path d="M230.149,120.939L65.986,256.274c0,0.191-0.048,0.472-0.144,0.855c-0.094,0.38-0.144,0.656-0.144,0.852v137.041
             	c0,4.948,1.809,9.236,5.426,12.847c3.616,3.613,7.898,5.431,12.847,5.431h109.63V303.664h73.097v109.64h109.629
             	c4.948,0,9.236-1.814,12.847-5.435c3.617-3.607,5.432-7.898,5.432-12.847V257.981c0-0.76-0.104-1.334-0.288-1.707L230.149,120.939
             	z"/>
             <path d="M457.122,225.438L394.6,173.476V56.989c0-2.663-0.856-4.853-2.574-6.567c-1.704-1.712-3.894-2.568-6.563-2.568h-54.816
             	c-2.666,0-4.855,0.856-6.57,2.568c-1.711,1.714-2.566,3.905-2.566,6.567v55.673l-69.662-58.245
             	c-6.084-4.949-13.318-7.423-21.694-7.423c-8.375,0-15.608,2.474-21.698,7.423L3.172,225.438c-1.903,1.52-2.946,3.566-3.14,6.136
             	c-0.193,2.568,0.472,4.811,1.997,6.713l17.701,21.128c1.525,1.712,3.521,2.759,5.996,3.142c2.285,0.192,4.57-0.476,6.855-1.998
             	L230.149,95.817l197.57,164.741c1.526,1.328,3.521,1.991,5.996,1.991h0.858c2.471-0.376,4.463-1.43,5.996-3.138l17.703-21.125
             	c1.522-1.906,2.189-4.145,1.991-6.716C460.068,229.007,459.021,226.961,457.122,225.438z"/>
        </svg>
                `;
                
                add_navigation_bar_button(journals_home_button);
            }

            add_quick_note_button();
            add_journals_home_button();

    </script>
{% endblock %}



